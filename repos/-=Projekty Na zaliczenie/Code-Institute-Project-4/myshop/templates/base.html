{% load static %}

<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>{% block title %}My Shop{% endblock %}</title>
	<link rel="stylesheet" href="{% static 'css/style.css' %}" />
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css">

	<link rel="icon" href="{% static 'images/favicon.ico' %}" />
</head>

<body>
	<header>
		<!-- Navbar -->
		<nav class="navbar navbar-expand-lg navbar-light bg-light">
			<div class="container">
				<!-- Logo -->
				<a class="navbar-brand" href="{% url 'home' %}">
					<img src="{% static 'images/logo.png' %}" alt="Logo" width="120">
				</a>

				<!-- Toggle button for mobile view -->
				<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
					aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
					<span class="navbar-toggler-icon"></span>
				</button>

				<!-- Navbar links -->
				<div class="collapse navbar-collapse" id="navbarNav">
					<ul class="navbar-nav ms-auto">
						<li class="nav-item">
							<a class="nav-link" href="{% url 'home' %}">Home</a>
						</li>

						<!-- Dropdown for categories -->
						<li class="nav-item dropdown">
							<a class="nav-link dropdown-toggle" href="#" id="categoriesDropdown" role="button"
								data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
								Categories
							</a>
							<div class="dropdown-menu" aria-labelledby="categoriesDropdown">
								{% for category in categories %}
								<a class="dropdown-item" href="{% url 'category_products' category.slug %}">{{
									category.name }}</a>
								{% endfor %}
							</div>
						</li>

						<!-- Static links -->
						<li class="nav-item">
							<a class="nav-link" href="{% url 'about' %}">About Us</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" href="{% url 'contact' %}">Contact</a>
						</li>

						<!-- Login/Register link -->
						<li class="nav-item">
							<a class="nav-link" href="#" data-bs-toggle="offcanvas" data-bs-target="#offcanvasRight"
								aria-controls="offcanvasRight">Login/Register</a>
						</li>
					</ul>
				</div>
			</div>
		</nav>

		<!-- Offcanvas for Login/Register -->
		<div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasRight" aria-labelledby="offcanvasRightLabel">
			<div class="offcanvas-header">
				<h5 id="offcanvasRightLabel">REGISTER</h5>
				<button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
			</div>
			<div class="offcanvas-body">
				<!-- Registration Form (initially shown) -->
				<div id="register-form">
					<form method="POST" action="{% url 'register' %}">
						{% csrf_token %}
						<div class="mb-3">
							<label for="first_name" class="form-label">First Name</label>
							<input type="text" class="form-control" id="first_name" name="first_name" required>
						</div>
						<div class="mb-3">
							<label for="last_name" class="form-label">Last Name</label>
							<input type="text" class="form-control" id="last_name" name="last_name" required>
						</div>
						<div class="mb-3">
							<label for="email" class="form-label">Email address</label>
							<input type="email" class="form-control" id="email" name="email" required>
						</div>
						<div class="mb-3">
							<label for="password" class="form-label">Password</label>
							<input type="password" class="form-control" id="password" name="password" required>
						</div>
						<button type="submit" class="btn btn-primary">Register</button>
					</form>
					<div class="mt-3">
						<a href="#" id="show-login">Already have an account? Login here</a>
					</div>
					<a href="{% provider_login_url 'google' %}">Login with Google</a>

				</div>

				<!-- Login Form (hidden initially) -->
				<div id="login-form" style="display: none;">
					<form method="POST" action="{% url 'login' %}">
						{% csrf_token %}
						<div class="mb-3">
							<label for="email" class="form-label">Email *</label>
							<input type="email" class="form-control" id="email" name="email" required>
						</div>
						<div class="mb-3">
							<label for="password" class="form-label">Password *</label>
							<input type="password" class="form-control" id="password" name="password" required>
						</div>
						<div class="mb-3">
							<a href="{% url 'password_reset' %}">Forgot your password?</a>
						</div>
						<button type="submit" class="btn btn-primary">Sign In</button>
					</form>
					<div class="mt-3">
						<a href="#" id="show-register">New customer? Create your account</a>
					</div>
				</div>
			</div>
		</div>
	</header>

	<main class="container mt-4">
		{% block content %}
		{% endblock %}
	</main>

	<footer class="footer mt-auto py-3 bg-light">
		<div class="container">
			<span class="text-muted">Â© 2024 My Shop. All rights reserved.</span>
		</div>
	</footer>

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js"></script>

	<!-- JavaScript to toggle between login and register forms -->
	<script>
		const showRegisterLink = document.getElementById('show-register');
		const showLoginLink = document.getElementById('show-login');
		const loginForm = document.getElementById('login-form');
		const registerForm = document.getElementById('register-form');

		showRegisterLink.addEventListener('click', function () {
			loginForm.style.display = 'none';
			registerForm.style.display = 'block';
		});

		showLoginLink.addEventListener('click', function () {
			loginForm.style.display = 'block';
			registerForm.style.display = 'none';
		});
	</script>

</body>

</html>